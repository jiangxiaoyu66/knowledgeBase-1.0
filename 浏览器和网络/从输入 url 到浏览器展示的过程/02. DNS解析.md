## 二. DNS 解析

参考： [史上最详细的经典面试题 从输入URL到看到页面发生了什么？](https://juejin.cn/post/6844903832435032072)

### 什么是DNS解析

DNS解析实际上就是读取域名，一路向顶级域名服务器查找，找到对应的IP地址

#### 栗子（帮助理解的）

假设你输入`www.baidu.com`，而这个网址并不是百度的真实地址，互联网中每一台机器都有唯一标识的IP地址，这个才是关键，但是它不好记，所以就需要一个网址和IP地址的转换，也就是DNS解析。



### 解析过程

DNS解析其实是一个递归的过程

顺序：本地域名=> 根域名=> com顶级域名=>.....

输入`www.google.com`网址后，首先在本地的域名服务器中查找，没找到去根域名服务器查找，没有再去`com`顶级域名服务器查找，如此的类推下去，直到找到IP地址，然后把它记录在本地，供下次使用。

大致过程就是`.`-> .com ->`google.com.` -> `www.google.com.`。 (你可能觉得我多写 .，并木有，这个.对应的就是根域名服务器，默认情况下所有的网址的最后一位都是.，既然是默认情况下，为了方便用户，通常都会省略，浏览器在请求DNS的时候会自动加上)



![16a634c9285cb545](https://gitee.com/jiang-xiaoyu/picture-bed-10/raw/master/images/16a634c9285cb545.png)



### CDN负载均衡

**CDN的全称是Content Delivery Network，即内容分发网络**。

根据每台机器的负载量和距离用户地理位置等等，来合理的分配响应用户请求的具体是哪一个服务器，这种过程就是DNS负载均衡

#### 栗子（帮助理解）

不知道你们有没有注意这样一件事，你访问`baidu.com`的时候，每次响应的并非是同一个服务器（IP地址不同），一般大公司都有成百上千台服务器来支撑访问，假设只有一个服务器，那它的性能和存储量要多大才能支撑这样大量的访问呢？DNS可以返回一个合适的机器的IP给用户，例如可以根据每台机器的负载量，该机器离用户地理位置的距离等等，这种过程就是DNS负载均衡
